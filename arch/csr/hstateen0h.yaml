# yaml-language-server: $schema=../../schemas/csr_schema.json

$schema: "csr_schema.json#"
kind: csr
name: hstateen0h
long_name: Upper 32 bits of Hypervisor State Enable 0 Register
address: 0x61C
priv_mode: S
length: 32
base: 32
description: |
  For RV64 harts, the Smstateen/Ssstateen extension adds four new 64-bit CSRs at machine level: `mstateen0` (Machine State Enable 0),
  `mstateen1`, `mstateen2`, and `mstateen3`. If supervisor mode is implemented, another four CSRs are defined at
  supervisor level: `sstateen0`, `sstateen1`, `sstateen2`, and `sstateen3`. And if the hypervisor extension is implemented,
  another set of CSRs is added: `hstateen0`, `hstateen1`, `hstateen2`, and `hstateen3`.

  For RV32, the registers listed above are 32-bit, and for the machine-level and hypervisor CSRs there is a corresponding
  set of high-half CSRs for the upper 32 bits of each register: `mstateen0h`, `mstateen1h`, `mstateen2h`, `mstateen3h`, `hstateen0h`,
  `hstateen1h`, `hstateen2h`, and `hstateen3h`.

definedBy:
  allOf:
    - H
    - Smstateen
    - Ssstateen
fields:
  SE0:
    long_name: sstateen0 access control
    location: 31
    description: |
      The SE0 bit in `hstateen0h` controls access to the `sstateen0` CSR.
    type: RW
    reset_value: UNDEFINED_LEGAL
  ENVCFG:
    location: 30
    definedBy:
      name: S
      version: ">= 1.11"
    description: |
      The ENVCFG bit in `hstateen0h` controls access to the `senvcfg` CSRs.
    type: RW
    reset_value: UNDEFINED_LEGAL
  CSRIND:
    location: 28
    definedBy: Sscsrind
    description: |
      The CSRIND bit in `hstateen0h` controls access to the `siselect` and the
      `sireg*`, (really `vsiselect` and `vsireg*`) CSRs provided by the Sscsrind
      extensions.
    type: RW
    reset_value: UNDEFINED_LEGAL
  AIA:
    location: 27
    definedBy: Ssaia
    description: |
      The AIA bit in `hstateen0h` controls access to all state introduced by
      the Ssaia extension and is not controlled by either the CSRIND or the
      IMSIC bits of `hstateen0`.
    type: RW
    reset_value: UNDEFINED_LEGAL
  IMSIC:
    location: 26
    definedBy: Ssaia
    description: |
      The IMSIC bit in `hstateen0h` controls access to the guest IMSIC state,
      including CSRs `stopei` (really `vstopei`), provided by the Ssaia extension.

      Setting the IMSIC bit in `hstateen0h` to zero prevents a virtual machine
      from accessing the hartâ€™s IMSIC the same as setting `hstatus.`VGEIN = 0.
    type: RW
    reset_value: UNDEFINED_LEGAL
  CONTEXT:
    location: 25
    definedBy: Sdtrig
    description: |
      The CONTEXT bit in `hstateen0h` controls access to the `scontext` CSR provided
      by the Sdtrig extension.
    type: RW
    reset_value: UNDEFINED_LEGAL
